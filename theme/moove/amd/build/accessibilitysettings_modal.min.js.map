{"version":3,"file":"accessibilitysettings_modal.min.js","sources":["../src/accessibilitysettings_modal.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Theme settings modal js.\n *\n * @package\n * @copyright  2022 Willian Mano - https://conecti.me\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport Ajax from 'core/ajax';\nimport Modal from 'core/modal';\nimport * as CustomEvents from 'core/custom_interaction_events';\nimport Notification from 'core/notification';\n\nexport default class AccessibilityModal extends Modal {\n    static TYPE = \"theme_moove/themesettings_modal\";\n    static TEMPLATE = \"theme_moove/accessibilitysettings_modal\";\n\n    constructor(root) {\n        super(root);\n\n        let request = Ajax.call([{\n            methodname: 'theme_moove_getthemesettings',\n            args: {}\n        }]);\n\n        request[0].done(function(result) {\n            document.getElementById('fonttype').value = result.fonttype;\n\n            if (result.enableaccessibilitytoolbar) {\n                document.getElementById('enableaccessibilitytoolbar').checked = true;\n            }\n        });\n    }\n\n    /**\n     * Set up all of the event handling for the modal.\n     */\n    registerEventListeners() {\n        // Apply parent event listeners.\n        super.registerEventListeners(this);\n\n        this.getModal().on(CustomEvents.events.activate, '[data-action=\"save\"]', function() {\n            let request = Ajax.call([{\n                methodname: 'theme_moove_savethemesettings',\n                args: {\n                    formdata: this.getBody().find('form').serialize()\n                }\n            }]);\n\n            request[0].done(function() {\n                document.location.reload(true);\n            }).fail(function(error) {\n                let message = error.message;\n\n                if (!message) {\n                    message = error.error;\n                }\n\n                Notification.addNotification({\n                    message: message,\n                    type: 'error'\n                });\n\n                this.hide();\n\n                this.destroy();\n            }.bind(this));\n        }.bind(this));\n\n        this.getModal().on(CustomEvents.events.activate, '[data-action=\"cancel\"]', function() {\n            this.hide();\n            this.destroy();\n        }.bind(this));\n    }\n}"],"names":["AccessibilityModal","Modal","constructor","root","Ajax","call","methodname","args","done","result","document","getElementById","value","fonttype","enableaccessibilitytoolbar","checked","registerEventListeners","this","getModal","on","CustomEvents","events","activate","formdata","getBody","find","serialize","location","reload","fail","error","message","addNotification","type","hide","destroy","bind"],"mappings":"4kDA2BqBA,2BAA2BC,eAI5CC,YAAYC,YACFA,MAEQC,cAAKC,KAAK,CAAC,CACrBC,WAAY,+BACZC,KAAM,MAGF,GAAGC,MAAK,SAASC,QACrBC,SAASC,eAAe,YAAYC,MAAQH,OAAOI,SAE/CJ,OAAOK,6BACPJ,SAASC,eAAe,8BAA8BI,SAAU,MAQ5EC,+BAEUA,uBAAuBC,WAExBC,WAAWC,GAAGC,aAAaC,OAAOC,SAAU,uBAAwB,WACvDlB,cAAKC,KAAK,CAAC,CACrBC,WAAY,gCACZC,KAAM,CACFgB,SAAUN,KAAKO,UAAUC,KAAK,QAAQC,gBAItC,GAAGlB,MAAK,WACZE,SAASiB,SAASC,QAAO,MAC1BC,KAAK,SAASC,WACTC,QAAUD,MAAMC,QAEfA,UACDA,QAAUD,MAAMA,6BAGPE,gBAAgB,CACzBD,QAASA,QACTE,KAAM,eAGLC,YAEAC,WACPC,KAAKnB,QACTmB,KAAKnB,YAEFC,WAAWC,GAAGC,aAAaC,OAAOC,SAAU,yBAA0B,gBAClEY,YACAC,WACPC,KAAKnB,mEA3DMjB,0BACH,mDADGA,8BAEC"}